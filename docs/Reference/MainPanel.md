# メインパネルリファレンス
## この文書について
この文書は、Anygetでデフォルトで中央に表示され、編集における中心的な役割を果たす**メインパネル**について解説するものです。

まだユーザーが少ないので、現段階ではそこまで詳細な情報は記されません。

## メインパネルの構造

メインパネルは、上部に固定された**タブバー**と、タブバーの選択に応じて切り替わる下のコンテンツ部により構成されます。タブバーは左右に設置されたボタンでスクロール可能です。

モードによっては、タブバーが2段重ねになるものもあります。

## モード一覧

### 「レスの追加」

執筆における主な作業の場となるモードです。上部の投稿一覧と下部の入力フォームによって構成されます。入力フォームに設定したテンプレートをもとにしてテキストボックスが出現するので、そこに投稿内容を入力して「投稿を追加」することを繰り返して執筆を行います。

### 「プレビュー」

ここまでに編集したデータをプレビューします。現在は「通常」モードしかありませんが2段タブになっており、今後プレビューのオプションは増える予定です。

#### 「通常」

**アンカー反映**の機能があり、「変数の詳細設定」パネルで設定した**アンカー**を参照して、ホバー時にアンカー先の投稿を一覧表示します。つまり、例えば番号を意味する変数に`>>`というアンカーが設定されていたとすると、`>>3`という文字列にホバーすることで、自動的に3番目の投稿が表示されます。

### 「プレーンテキスト」

テキストデータとして書いた作品を出力するモードです。作品が完成したら、基本的にはここからコピーして小説投稿サイトなどに貼り付けます。サイドバーに「設定」モードから各種設定を&quot;引用&quot;していますが、全てではありません。

サイドバー下部には簡易的な置換ツールが用意されています。

### 「セーブ/ロード」

#### セーブ

`.json`形式で編集データをセーブするモードです。

セーブには種類が存在し、それぞれ保存対象になるデータの区分が違います。
##### 普通にセーブ
最もオーソドックスなセーブであり、単純に全てのデータをセーブします。

##### テンプレートのみセーブ
レスの投稿内容を保存せず、テンプレートや設定のみをセーブするオプションです。

##### 設定のみセーブ
テンプレートも投稿内容も保存せず、設定だけをセーブするオプションです。

#### ロード

##### ファイルからロード
セーブした`.json`ファイルをアップロードすることで、データをロードすることが可能です。

スタートメニューから同じことができます。

##### 最後のセッションからロード
Anygetがタブを閉じられる際にセーブするデータのうち、最新のものを読み込むオプションです。

スタートメニューではこれのみならず、直近5つのデータならどれでも読み込むことができます。

### 「設定」
小説を執筆するにあたっての、全般的な**設定**を行うモードです。

上部の検索欄から設定を検索できます。

設定の一覧については、[設定リファレンス](Settings.md)を参照してください。

### 「置換する」
対象となる変数を選択して、正規表現を用いてその内容を置換することができます。

「レスの追加」モードの検索ボックスと似ていますが、こちらはより詳細な置換が可能です。
#### 「変数を選択」部分  
置換対象となる変数にチェックを入れます。『全選択』ボタンで全ての変数がチェックされ、『反転』ボタンで反転されます。  
#### 各種設定部分  
チェックボックスによる設定を行います。設定は基本的に正規表現の各種フラグと結びついており、置換結果に影響します。

- 「`.`に改行をマッチ」……Javascript正規表現における`s`フラグをオンにします。  
- 「マルチライン」……Javascript正規表現における`m`フラグをオンにします。  
- 「大文字・小文字無視」……Javascript正規表現における`i`フラグをオンにします。  
- 「全置換」……Javascript正規表現における`g`フラグをオンにし、さらにそれぞれのレス内のすべての変数を置換対象にします。

### 「エクスポート」

プレーンテキスト以外の形式に、小説をエクスポートするためのモードです。

2段タブになっており、2段目には3つの選択肢が存在しますが、実装済みは「.dat(2ch)」のみです。

#### 「.dat(2ch)」
作成した掲示板を、2ch専用ブラウザ等で開ける`.dat`ファイルにエクスポートするモードです。テキストボックスに**テンプレートパネルと同じ記法で**パラメータを入力した後に「datファイルを生成」ボタンを押すことでダウンロードが始まります。パラメータは以下の通りです。  
  
- **スレッドタイトル**……スレッドのタイトルを指定するパラメータです。省略した場合は「UNKNOWN」になります。ファイル名にも使用されます。このパラメータだけは特殊で、テンプレート記法を**使わず**プレーンテキストとして入力します。  
- **名前**……各投稿の"名前"に相当する部分を指定するパラメータです。トリップの処理機能は付いていません。  
- **メールアドレス**……各投稿の"メールアドレス"に相当する部分を指定するパラメータです。  
- **日付・IDなど**……各投稿の"日付"、"ID"等に相当する部分を指定するパラメータです。  
- **本文**……各投稿の"本文"に相当する部分を指定するパラメータです。唯一、途中で改行を挟んでもそれが無視されないパラメータです。 

### 「インポート」

未実装です。